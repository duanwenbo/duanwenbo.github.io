<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Note | Quick Notes on SQL | ü§ó Wenbo'Log</title>
<meta name=keywords content="MySQL,reading"><meta name=description content="Concept


What is a database?

A structured set of computerized data with accessible interface



SQL:

Structure Query Language (SQL), A standard language used in all relational database management system



Install the database


Two components:

MySQL
SQL workbench



Add the mysql to the environment variable
open ~/.zshrc
## add the mysql bin
## no spaces around the = 
export PATH=${PATH}:/usr/local/mysql/bin
## The save the file
source ./zshrc




Hierachy:

Server -> Multiple database -> Multiple sheets



Basic


Select, Create, Delete"><meta name=author content="Wenbo"><link rel=canonical href=http://localhost:1313/posts/sql-concept/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/sql-concept/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script><meta property="og:title" content="Note | Quick Notes on SQL"><meta property="og:description" content="Concept


What is a database?

A structured set of computerized data with accessible interface



SQL:

Structure Query Language (SQL), A standard language used in all relational database management system



Install the database


Two components:

MySQL
SQL workbench



Add the mysql to the environment variable
open ~/.zshrc
## add the mysql bin
## no spaces around the = 
export PATH=${PATH}:/usr/local/mysql/bin
## The save the file
source ./zshrc




Hierachy:

Server -> Multiple database -> Multiple sheets



Basic


Select, Create, Delete"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/sql-concept/"><meta property="og:image" content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-26T23:54:22+00:00"><meta property="article:modified_time" content="2023-06-26T23:54:22+00:00"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Note | Quick Notes on SQL"><meta name=twitter:description content="Concept


What is a database?

A structured set of computerized data with accessible interface



SQL:

Structure Query Language (SQL), A standard language used in all relational database management system



Install the database


Two components:

MySQL
SQL workbench



Add the mysql to the environment variable
open ~/.zshrc
## add the mysql bin
## no spaces around the = 
export PATH=${PATH}:/usr/local/mysql/bin
## The save the file
source ./zshrc




Hierachy:

Server -> Multiple database -> Multiple sheets



Basic


Select, Create, Delete"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Note | Quick Notes on SQL","item":"http://localhost:1313/posts/sql-concept/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Note | Quick Notes on SQL","name":"Note | Quick Notes on SQL","description":"Concept What is a database?\nA structured set of computerized data with accessible interface SQL:\nStructure Query Language (SQL), A standard language used in all relational database management system Install the database\nTwo components:\nMySQL SQL workbench Add the mysql to the environment variable\nopen ~/.zshrc ## add the mysql bin ## no spaces around the = export PATH=${PATH}:/usr/local/mysql/bin ## The save the file source ./zshrc Hierachy:\nServer -\u0026gt; Multiple database -\u0026gt; Multiple sheets Basic Select, Create, Delete\n","keywords":["MySQL","reading"],"articleBody":"Concept What is a database?\nA structured set of computerized data with accessible interface SQL:\nStructure Query Language (SQL), A standard language used in all relational database management system Install the database\nTwo components:\nMySQL SQL workbench Add the mysql to the environment variable\nopen ~/.zshrc ## add the mysql bin ## no spaces around the = export PATH=${PATH}:/usr/local/mysql/bin ## The save the file source ./zshrc Hierachy:\nServer -\u003e Multiple database -\u003e Multiple sheets Basic Select, Create, Delete\nCREATE DATABASE tea_shop; USE tea_shop; DROP DATABASE tea_shop; -- show current selection SELECT database(); -- show the whole sever SHOW DATABASES; Tables\nCreate: A database is just a bunch of tables (core of the relational database)\nCREATE TABLE cat ( name VARCHAR(50), agen INT ); Query: A collection of related data held in a Structured format within a database\n-- Remember the current cursor is on the database SHOW TABLES; SHOW COLUMNS FROM tea_shop; -- Describ DESC \u003ctable name\u003e Drop:\nDROP TABLE \u003ctable name\u003e; Insert:\nINSERT INTO \u003ctable name\u003e (name, age) VALUE(\"JACK\", 10); Data Types\nINT, VARCHAR,.. Basic Attributes of table\nNOT NUlL constrains\nCREATE TABLE cat2 ( name VARCHAR(50) NOT NULL, age INT NOT NULL ); Tips: Use ‚Äô first instead of \" to avoid confusion\nDefault Values\nCREATE TABLE cats3 ( name VARCHAR(50) DEFAULT 'unnamed', age INT DEFAULT 99 ); -- Note: The default setting won't prevent you from inserting the NULL mannually ! Key: We need a unique ID to differentiate the rows even though they looks the same.\nPrimary Key: A unique identifier\nCREATE TABLE unique_cats ( cats_id INT NOT NULL PRIMARY KEY, name VARCHAR(50) DEFAULT 'unnamed', age INT DEFAULT 99 ); -- alternative way CREATE TABLE unique_cats ( cats_id INT NOT NULL, name VARCHAR(50) DEFAULT 'unnamed', age INT DEFAULT 99, PRIMARY KEY(cats_id) ); Auto increament: Only valid for the primary key column\nmysql\u003e CREATE TABLE unique_cat( -\u003e name VAECHAR(50) DEFAULT 'unnamed', -\u003e id INT AUTO_INCREMENT, -\u003e age INT, -\u003e PRIMARY KEY(id)); mysql\u003e DESC unique_cat; +-------+-------------+------+-----+---------+----------------+ | Field | Type | Null | Key | Default | Extra | +-------+-------------+------+-----+---------+----------------+ | name | varchar(50) | YES | | unnamed | | | id | int | NO | PRI | NULL | auto_increment | | age | int | YES | | NULL | | +-------+-------------+------+-----+---------+----------------+ 3 rows in set (0.01 sec) String Function **CONCAT() **/ CONCAT_WS (with_seperator):\nSELECT CONCAT(\u003ccolumn name\u003e,' ') AS new_name FROM \u003ctable name\u003e SUBSTRING() / SUBSTR()\nSilimiar to the slice operation in Python\nSELECT SUBSTRING(\u003cfull string\u003e, \u003cstart position\u003e, \u003cend position\u003e) When nesting the query:\nSELECT ... your combination FROM \u003ctable name\u003e -- do code beautifier for your co-worker :) REPLACE()\nSELECT REPLACE ('hello world', 'hell', '*Q#Q*'); -- Case sensitive REVERSE()\nSELECT REVERSE ('ÈïøÊÅ®ÈÄÅÂπ¥Ëä≥'); CHAR_LENGTH()\n## LENGTH mearsures in bits mysql\u003e SELECT -\u003e LENGTH('Êµ∑Ë±ö'); +------------------+ | LENGTH('Êµ∑Ë±ö') | +------------------+ | 6 | +------------------+ 1 row in set (0.00 sec) mysql\u003e SELECT -\u003e CHAR_LENGTH('Êµ∑Ë±ö'); +-----------------------+ | CHAR_LENGTH('Êµ∑Ë±ö') | +-----------------------+ | 2 | +-----------------------+ 1 row in set (0.00 sec) UPPER/ UCASE and LOWER/LCASE\nINSERT\nREPEAT\nTRIM\nmysql\u003e SELECT TRIM( TRAILING '.' FROM '..em..' ); +------------------------------------+ | TRIM( TRAILING '.' FROM '..em..' ) | +------------------------------------+ | ..em | +------------------------------------+ 1 row in set (0.00 sec) Pratice time üôå\nTips on writting function:\nAlways following a ‚Äò(‚Äô after the calling function, do not leave the space. E.g. This will cause error:\n## Error demostration mysql\u003e SELECT TRIM (LEADING '.' FROM '...emmm...'); ## Instead: mysql\u003e SELECT TRIM(LEADING '.' FROM '...emmm...'); +-------------------------------------+ | TRIM(LEADING '.' FROM '...emmm...') | +-------------------------------------+ | emmm... | +-------------------------------------+ 1 row in set (0.00 sec) Put the Aliases name in to ‚Äô ‚Äô although the single word without quotation marks can be encoded correctly\nFunction Cheatsheet\nSelection select distinct elements\nSELECT DISTINCT \u003ccolumn name\u003e FROM \u003ctable name\u003e; -- DISTINCT Applies to all following keys ORDER BY\nSELSELECT DISTINC author_lname, author_fname FROM books ORDER BY author_lname DESC; -- ORDER BY 2 (2nd selected columns) -- ORDER BY author_lname, author_fname LIMIT: limit the number of query return\nSELECT DISTINC author_lname, author_fname FROM books ORDER BY author_lname DESC LIMIT 5,10; -- LIMITE from 5 to 10th row SEARCH: searching the characture\nSELECT title, author_lname FROM books WHERE author_lname LIKE \"%da%\"; -- r'%'' is equivlent to r'.*' in regular expression SQL search cheatsheet % == .* _ == . ' == $ (at the end of the string) \\ == \\ (ËΩ¨‰πâ) Pratice time üôå\nTips:\nSELECT \u003ccolum name\u003e AS another_name FROM books -- AS goes first before FROM CRUP CRUD: Create, Read, Update, Delete\nRead:\nConditional Statement: WHERER\nSELECT \u003ccolumn name\u003e, \u003ccolumn name\u003e FROM \u003ctable name\u003e WHERE \u003cBOOL expression\u003e;\tAliases Statement: AS, Temporary only for this query\nmysql\u003e SELECT name AS kettyname FROM cats; +----------------+ | kettyname | +----------------+ | Ringo | | Cindy | | Dumbledore | | Egg | | Misty | | George Michael | | Jackson | +----------------+ Update:\nAlways from a table prospect using the SQL\nUPDATE \u003cable name\u003e SET \u003ccloumn name\u003e = \u003cvalue\u003e WHERE ... Rule of üëç: Try selecting before update. Make sure your target is correct.\nNotice the data type when amending.\nDelete (Destroy:/ ):\nDELETE FROM \u003ctable name\u003e WHERE .. Notice the difference from DROP: DELETE will at least leave an empty set.\nTry Selecting before as well.\nPratice time üôå\nLeave enough space when naming each column. If not:\n-- modify the attributes of column ALTER \u003ctable name\u003e MODIFY COLUMN \u003ccolumn name\u003e \u003cnew data type\u003e The PRIMARY KEY setting will set NOT NULL by default\nData Type (Time) Text\nDecimal DECIMAL(5,2)\nFLoat\nDATE: YYYY-MM-DD\nTIME: hh:mm:ss\nDATETIME: YYYY-MM-DD hh:mm:ss\nCURDATE / CURTIME / NOW\nIFNULL(, replacement)\nTime Stamp : Similar to datetime by only supports much smaller range\nOn update: one more extra\nmysql\u003e DESC caption; +-----------+--------------+------+-----+-------------------+-----------------------------+ | Field | Type | Null | Key | Default | Extra | +-----------+--------------+------+-----+-------------------+-----------------------------+ | text | varchar(200) | YES | | NULL | | | create_at | timestamp | YES | | CURRENT_TIMESTAMP | DEFAULT_GENERATED | | update_at | timestamp | YES | | NULL | on update CURRENT_TIMESTAMP | +-----------+--------------+------+-----+-------------------+-----------------------------+ mysql\u003e INSERT INTO caption (text) VALUES('hello'); Query OK, 1 row affected (0.00 sec) mysql\u003e SELECT * FROM caption; +-------+---------------------+-----------+ | text | create_at | update_at | +-------+---------------------+-----------+ | hello | 2023-06-16 14:38:47 | NULL | +-------+---------------------+-----------+ mysql\u003e UPDATE caption SET text = 'hello!!'; Query OK, 1 row affected (0.01 sec) Rows matched: 1 Changed: 1 Warnings: 0 mysql\u003e SELECT * FROM caption; +---------+---------------------+---------------------+ | text | create_at | update_at | +---------+---------------------+---------------------+ | hello!! | 2023-06-16 14:38:47 | 2023-06-16 14:39:37 | +---------+---------------------+---------------------+ Change the format of time:\nDATE_FORMAT\nmysql\u003e SELECT DATE_FORMAT(NOW(), '%d-%m-%Y'); +--------------------------------+ | DATE_FORMAT(NOW(), '%d-%m-%Y') | +--------------------------------+ | 16-06-2023 | +--------------------------------+ format Ref\nLogical Operation Not equal !=\nNot like NOT LIKE\nGreater than \u003e\nAND AND\nOR OR\nBETWEEN BETWEEN .. AND ...\nIN IN: (NOT IN as well)\nWHERE author_lname IN ('Bobby', 'Baobi', 'Buobi') CASE STATMENT\nSELECT title, released_year, CASE WHEN released_year \u003e= 2000 THEN 'Morden lit' WHEN .. THEN .. WHEN .. THEN .. ELSE .. END AS .. FROM books; IS NULL\nAggregation Count\nSELECT COUNT(author_laname) FROM books -- COUNT(*) has only_form_by_whole_group attribute -- COUNT omits the NULL values Group By (the result is like clustering)#\nmysql\u003e SELECT COUNT(*) FROM books GROUP BY author_lname; +----------+ | COUNT(*) | +----------+ | 2 | | 3 | | 3 | | 1 | | 1 | | 2 | | 1 | | 1 | | 2 | | 2 | | 1 | +----------+ 11 rows in set (0.00 sec) mysql\u003e SELECT COUNT(*) FROM books; +----------+ | COUNT(*) | +----------+ | 19 | +----------+ 1 row in set (0.00 sec) mysql\u003e SELECT * FROM books GROUP BY author_lname; ERROR 1055 (42000): Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'book_shop.books.book_id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by mysql\u003e SELECT author_lname FROM books GROUP BY author_lname; +----------------+ | author_lname | +----------------+ | Lahiri | | Gaiman | | Eggers | | Chabon | | Smith | | Carver | | DeLillo | | Steinbeck | | Foster Wallace | | Harris | | Saunders | +----------------+ 11 rows in set (0.00 sec) # notice how * refers to different targets when using GROUP BY mysql\u003e SELECT CONCAT(author_lname,' ',author_fname) AS author FROM books GROUP BY author; +----------------------+ | author | +----------------------+ | Lahiri Jhumpa | | Gaiman Neil | | Eggers Dave | | Chabon Michael | | Smith Patti | | Carver Raymond | | DeLillo Don | | Steinbeck John | | Foster Wallace David | | Harris Dan | | Harris Freida | | Saunders George | +----------------------+ 12 rows in set (0.00 sec) MIN/MAX\nSub query\nmysql\u003e SELECT title, pages FROM books WHERE pages=(SELECT MAX(pages) FROM books); +-------------------------------------------+-------+ | title | pages | +-------------------------------------------+-------+ | The Amazing Adventures of Kavalier \u0026 Clay | 634 | +-------------------------------------------+-------+ 1 row in set (0.00 sec) Group BY + MIN/Max\n## Not working :( mysql\u003e SELECT author_lname, released_year -\u003e FROM books -\u003e GROUP BY author_lname; ERROR 1055 (42000): Expression #2 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'book_shop.books.released_year' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by ## working :) mysql\u003e SELECT author_lname, MIN(released_year) -\u003e FROM books -\u003e GROUP BY author_lname; +----------------+--------------------+ | author_lname | MIN(released_year) | +----------------+--------------------+ | Lahiri | 1996 | | Gaiman | 2001 | | Eggers | 2001 | | Chabon | 2000 | | Smith | 2010 | | Carver | 1981 | | DeLillo | 1985 | | Steinbeck | 1945 | | Foster Wallace | 2004 | | Harris | 2001 | | Saunders | 2017 | +----------------+--------------------+ 11 rows in set (0.00 sec) Notice the concept of Aggregation Function, Group By only works with the aggregation functions (MIN/MAX/SUM/AVG)\nReference: https://dev.mysql.com/doc/refman/8.0/en/aggregate-functions.html\nConstrains \u0026 Alter Unique\nCREATE TABLE contacts ( Name VARCHAR(150) NOT NULL, Phone VARCHAR(12) NOT NULL UNIQUE ); mysql\u003e DESC contacts; +-------+--------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+--------------+------+-----+---------+-------+ | Name | varchar(150) | NO | | NULL | | | Phone | varchar(12) | NO | PRI | NULL | | +-------+--------------+------+-----+---------+-------+ Check / Constrains\nCREATE TABLE partiers ( Name VARCHAR(150) NOT NULL, Age INT NOT NULL CHECK (age \u003e 18) ); -- Equivlent CREATE TABLE partiers ( Name VARCHAR(150) NOT NULL, Age INT NOT NULL, CONSTRAINT adult_check CHECK (Age \u003e 18) ); Multi-column Constrains\nCREATE TABLE companies ( name VARCHAR(150) NOT NULL, address VARCHAR(300) NOT NULL, CONSTRAINT name_address UNIQUE(name, address) ); ALL in one place to change the attribute of the table: ALTER\n-- Add a column ALTER TABLE companies ADD COLUMN type VARCHAR(50) NOT NULL DEFAULT 'Ltd'; -- Drop a column ALTER TABLE companies DROP COLUMN type VARCHAR(50) NOT NULL DEFAULT 'Ltd'; -- Rename a table ALTER TABLE companies RENAME TO ''suppliers -- Rename a column ALTER TABLE companies RENAME COLUMN type TO Categories -- Modify the existing column ALTER TABLE companies MODIFY COLUMN \u003cnew constraint\u003e Tips: Check all constraints\nSELECT * FROM USER_CONSTRAINTS -- It will return all constraints in the selected database One 2 Many How to manage the data ? by relationship:\nOne to one relationship table 1: basic info of customers | table2: details of customers | customer as the key One to Many relationship (*) One book to many of reviews Many to many relationship Books and authors: books can have multiple authors, the author can also have many books One to many: Take customers and orders for example:\nPrimary Key: Some particular column that always unique\nForeign Key: Reference to other table\n-- how to use foreign key to link two tables? -- table 1 CREATE TABLE customers ( id INT PRIMARY KEY AUTO_INCREMENT, first_name VARCHAR(50), last_name VARCHAR(50), email VARCHAR(50) UNIQUE); -- table 2 CREATE TABLE orders( id INT PRIMARY KEY AUTO_INCREMENT, order_date DATE,DES customer_id INT, FOREIGN KEY (customer_id) REFERENCES customers(id) ); Cross Join: dummy emmumerated combination of two table\nInner Join:\nSELECT * FROM customers JOIN orders on orders.customer_id = customers.id; mysql\u003e SELECT * FROM customers JOIN orders on orders.customer_id = customers.id; +----+------------+-----------+------------------+----+------------+--------+-------------+ | id | first_name | last_name | email | id | order_date | amount | customer_id | +----+------------+-----------+------------------+----+------------+--------+-------------+ | 1 | Boy | George | george@gmail.com | 1 | 2016-02-10 | 99.99 | 1 | | 1 | Boy | George | george@gmail.com | 2 | 2017-11-11 | 35.50 | 1 | | 2 | George | Michael | gm@gmail.com | 3 | 2014-12-12 | 800.67 | 2 | | 2 | George | Michael | gm@gmail.com | 4 | 2015-01-03 | 12.50 | 2 | | 5 | Bette | Davis | bette@aol.com | 5 | 1999-04-11 | 450.25 | 5 | +----+------------+-----------+------------------+----+------------+--------+-------------+ 5 rows in set (0.00 sec) Left Join / Right join:\nSELECT * FROM customers LEFT JOIN orders on orders.customer_id = customers.id; mysql\u003e SELECT * FROM customers LEFT JOIN orders on orders.customer_id = customers.id; +----+------------+-----------+------------------+------+------------+--------+-------------+ | id | first_name | last_name | email | id | order_date | amount | customer_id | +----+------------+-----------+------------------+------+------------+--------+-------------+ | 1 | Boy | George | george@gmail.com | 1 | 2016-02-10 | 99.99 | 1 | | 1 | Boy | George | george@gmail.com | 2 | 2017-11-11 | 35.50 | 1 | | 2 | George | Michael | gm@gmail.com | 3 | 2014-12-12 | 800.67 | 2 | | 2 | George | Michael | gm@gmail.com | 4 | 2015-01-03 | 12.50 | 2 | | 3 | David | Bowie | david@gmail.com | NULL | NULL | NULL | NULL | | 4 | Blue | Steele | blue@gmail.com | NULL | NULL | NULL | NULL | | 5 | Bette | Davis | bette@aol.com | 5 | 1999-04-11 | 450.25 | 5 | +----+------------+-----------+------------------+------+------------+--------+-------------+ # Notice some customer doesn't have order info but still be merged into the new table Delete with the foriegn key constraints\n-- table 2 CREATE TABLE orders( id INT PRIMARY KEY AUTO_INCREMENT, order_date DATE,DES customer_id INT, FOREIGN KEY (customer_id) REFERENCES customers(id) ON DELETE CASECADE ); View VIEWS\nCreating a cache table CREATE VIEW new_list AS SELECT ... Can \u0026 Can‚Äôt can‚Äôt: Join, Update (Depend on the view table type ) Over-write to correct CREATE OR REPLACE VIEW ... GROUP BY HAVING:\nSilimar to WHERE but applied withGROUP BY GROUP BY WITH ROLLUP:\nThe Aggrigation of aggrigation SQL MODES\nSELECT @@GLOBAL.sql_mode SET GLOBAL sql_mode='modes' SELECT @@SESSION.sql_mode SET SESSION sql_mode = 'mode,..' +-----------------------------------------------------------------------------------------------------------------------+ | @@GLOBAL.sql_mode | +-----------------------------------------------------------------------------------------------------------------------+ | ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION | +-----------------------------------------------------------------------------------------------------------------------+ Modes: STRICT_TRANS_TABLES: Strict constraints on the data type conversion ONLY_FULL_BY: Window function Window function\nSilimar to window function But append aggregation results on each row OVER( PARTITION BY )\nmysql\u003e SELECT department, salary, AVG(salary) OVER(x BY department) FROM employees; +------------------+--------+-------------------------------------------+ | department | salary | AVG(salary) OVER(PARTITION BY department) | +------------------+--------+-------------------------------------------+ | customer service | 38000 | 46571.4286 | | customer service | 45000 | 46571.4286 | | customer service | 61000 | 46571.4286 | | customer service | 40000 | 46571.4286 | | customer service | 31000 | 46571.4286 | | customer service | 56000 | 46571.4286 | | customer service | 55000 | 46571.4286 | | engineering | 80000 | 81285.7143 | | engineering | 69000 | 81285.7143 | OVER( ORDER BY): rolling style mysql\u003e SELECT department, salary, SUM(salary) OVER(PARTITION BY department ORDER BY salary ASC) AS depart_avg_rolling, SUM(salary) OVER(PARTITION BY department) as depart_avg FROM employees; +------------------+--------+--------------------+------------+ | department | salary | depart_avg_rolling | depart_avg | +------------------+--------+--------------------+------------+ | customer service | 31000 | 31000 | 326000 | | customer service | 38000 | 69000 | 326000 | | customer service | 40000 | 109000 | 326000 | | customer service | 45000 | 154000 | 326000 | | customer service | 55000 | 209000 | 326000 | | customer service | 56000 | 265000 | 326000 | | customer service | 61000 | 326000 | 326000 | | engineering | 67000 | 67000 | 569000 | | engineering | 69000 | 136000 | 569000 | | engineering | 70000 | 206000 | 569000 | | engineering | 80000 | 286000 | 569000 | RANK() OVER( ORDER BY) mysql\u003e SELECT department, salary,RANK() OVER(PARTITION BY department ORDER BY salary DESC) AS depart_rank, RANK() OVER(ORDER BY salary DESC) AS over_rank FROM employees; +------------------+--------+-------------+-----------+ | department | salary | depart_rank | over_rank | +------------------+--------+-------------+-----------+ | sales | 159000 | 1 | 1 | | engineering | 103000 | 1 | 2 | | engineering | 91000 | 2 | 3 | | engineering | 89000 | 3 | 4 | | engineering | 80000 | 4 | 5 | | sales | 72000 | 2 | 6 | | engineering | 70000 | 5 | 7 | | sales | 70000 | 3 | 7 | | engineering | 69000 | 6 | 9 | | engineering | 67000 | 7 | 10 | NTLE\nFIRST VALUE\nLAG: Shift down for 1 row\n","wordCount":"2817","inLanguage":"en","image":"http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2023-06-26T23:54:22Z","dateModified":"2023-06-26T23:54:22Z","author":{"@type":"Person","name":"Wenbo"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/sql-concept/"},"publisher":{"@type":"Organization","name":"ü§ó Wenbo'Log","logo":{"@type":"ImageObject","url":"http://localhost:1313/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Wenbo'Log (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Wenbo'Log</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/ title=Posts><span>Posts</span></a></li><li><a href=http://localhost:1313/archive/ title=Archive><span>Archive</span></a></li><li><a href=http://localhost:1313/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=http://localhost:1313/categories/ title=Categories><span>Categories</span></a></li><li><a href=http://localhost:1313/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://www.emojisearch.app title=emojiSearch><span>emojiSearch</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;¬ª&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Note | Quick Notes on SQL</h1><div class=post-meta><span title='2023-06-26 23:54:22 +0000 UTC'>June 26, 2023</span>&nbsp;¬∑&nbsp;14 min&nbsp;¬∑&nbsp;2817 words&nbsp;¬∑&nbsp;Wenbo</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#concept>Concept</a></li><li><a href=#basic>Basic</a></li><li><a href=#string-function>String Function</a><ul><li><a href=#selection>Selection</a></li></ul></li><li><a href=#crup>CRUP</a></li><li><a href=#data-type-time>Data Type (Time)</a></li><li><a href=#logical-operation>Logical Operation</a></li><li><a href=#aggregation>Aggregation</a></li><li><a href=#constrains--alter>Constrains & Alter</a></li><li><a href=#one-2-many>One 2 Many</a></li><li><a href=#view>View</a></li><li><a href=#window-function>Window function</a></li></ul></nav></div></details></div><div class=post-content><h2 id=concept>Concept<a hidden class=anchor aria-hidden=true href=#concept>#</a></h2><ul><li><p>What is a database?</p><ul><li>A <strong>structured</strong> set of computerized data with <strong>accessible interface</strong></li></ul></li><li><p>SQL:</p><ul><li>Structure Query Language (SQL), A standard language used in all relational database management system</li></ul></li><li><p>Install the database</p><ul><li><p>Two components:</p><ol><li>MySQL</li><li>SQL workbench</li></ol></li><li><p>Add the mysql to the environment variable</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>open ~/.zshrc
</span></span><span class=line><span class=cl><span class=c1>## add the mysql bin</span>
</span></span><span class=line><span class=cl><span class=c1>## no spaces around the = </span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span><span class=si>${</span><span class=nv>PATH</span><span class=si>}</span>:/usr/local/mysql/bin
</span></span><span class=line><span class=cl><span class=c1>## The save the file</span>
</span></span><span class=line><span class=cl><span class=nb>source</span> ./zshrc
</span></span></code></pre></div></li></ul></li><li><p>Hierachy:</p><ul><li>Server -> Multiple database -> Multiple sheets</li></ul></li></ul><h2 id=basic>Basic<a hidden class=anchor aria-hidden=true href=#basic>#</a></h2><ul><li><p><strong>Select, Create, Delete</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Sql data-lang=Sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=n>tea_shop</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>USE</span><span class=w> </span><span class=n>tea_shop</span><span class=p>;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>DROP</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=n>tea_shop</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- show current selection
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>database</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- show the whole sever
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SHOW</span><span class=w> </span><span class=n>DATABASES</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div></li><li><p><strong>Tables</strong></p><ul><li><p>Create: A database is just a bunch of tables (core of the relational database)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>cat</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>agen</span><span class=w> </span><span class=nb>INT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div></li><li><p>Query: A collection of related data held in a <strong>Structured format</strong> within a database</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- Remember the current cursor is on the database
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SHOW</span><span class=w> </span><span class=n>TABLES</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SHOW</span><span class=w> </span><span class=n>COLUMNS</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>tea_shop</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Describ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>DESC</span><span class=w> </span><span class=o>&lt;</span><span class=k>table</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=w>
</span></span></span></code></pre></div></li><li><p>Drop:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>&lt;</span><span class=k>table</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div></li><li><p>Insert:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>&lt;</span><span class=k>table</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=w> </span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>age</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>VALUE</span><span class=p>(</span><span class=s2>&#34;JACK&#34;</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=p>);</span><span class=w> 
</span></span></span></code></pre></div></li></ul></li><li><p>Data Types</p><ul><li>INT, VARCHAR,..</li></ul></li><li><p><strong>Basic Attributes of table</strong></p><ul><li><p><strong>NOT NUlL constrains</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>cat2</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>age</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div></li><li><p>Tips: Use &rsquo; first instead of " to avoid confusion</p></li><li><p><strong>Default Values</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>cats3</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>&#39;unnamed&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>age</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=mi>99</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Note: The default setting won&#39;t prevent you from inserting the NULL mannually !
</span></span></span></code></pre></div></li><li><p><strong>Key</strong>: We need a unique ID to differentiate the rows even though they looks the same.</p><ul><li><p>Primary Key: A unique identifier</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>unique_cats</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>cats_id</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>&#39;unnamed&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>age</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=mi>99</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- alternative way
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>unique_cats</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>cats_id</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>&#39;unnamed&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>age</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=mi>99</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>(</span><span class=n>cats_id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div></li><li><p>Auto increament: Only valid for the primary key column</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>unique_cat</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>-&gt;</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=n>VAECHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>&#39;unnamed&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>-&gt;</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=n>AUTO_INCREMENT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>-&gt;</span><span class=w> </span><span class=n>age</span><span class=w> </span><span class=nb>INT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=o>-&gt;</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>(</span><span class=n>id</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mysql&gt; DESC unique_cat<span class=p>;</span>
</span></span><span class=line><span class=cl>+-------+-------------+------+-----+---------+----------------+
</span></span><span class=line><span class=cl><span class=p>|</span> Field <span class=p>|</span> Type        <span class=p>|</span> Null <span class=p>|</span> Key <span class=p>|</span> Default <span class=p>|</span> Extra          <span class=p>|</span>
</span></span><span class=line><span class=cl>+-------+-------------+------+-----+---------+----------------+
</span></span><span class=line><span class=cl><span class=p>|</span> name  <span class=p>|</span> varchar<span class=o>(</span>50<span class=o>)</span> <span class=p>|</span> YES  <span class=p>|</span>     <span class=p>|</span> unnamed <span class=p>|</span>                <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> id    <span class=p>|</span> int         <span class=p>|</span> NO   <span class=p>|</span> PRI <span class=p>|</span> NULL    <span class=p>|</span> auto_increment <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> age   <span class=p>|</span> int         <span class=p>|</span> YES  <span class=p>|</span>     <span class=p>|</span> NULL    <span class=p>|</span>                <span class=p>|</span>
</span></span><span class=line><span class=cl>+-------+-------------+------+-----+---------+----------------+
</span></span><span class=line><span class=cl><span class=m>3</span> rows in <span class=nb>set</span> <span class=o>(</span>0.01 sec<span class=o>)</span>
</span></span></code></pre></div></li></ul></li></ul></li></ul><h2 id=string-function>String Function<a hidden class=anchor aria-hidden=true href=#string-function>#</a></h2><ul><li><p>**CONCAT() **/ CONCAT_WS (with_seperator):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>CONCAT</span><span class=p>(</span><span class=o>&lt;</span><span class=k>column</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=p>,</span><span class=s1>&#39; &#39;</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>new_name</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>&lt;</span><span class=k>table</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=w>
</span></span></span></code></pre></div></li><li><p><strong>SUBSTRING()</strong> / SUBSTR()</p><p>Silimiar to the slice operation in Python</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=k>SUBSTRING</span><span class=p>(</span><span class=o>&lt;</span><span class=k>full</span><span class=w> </span><span class=n>string</span><span class=o>&gt;</span><span class=p>,</span><span class=w> </span><span class=o>&lt;</span><span class=k>start</span><span class=w> </span><span class=k>position</span><span class=o>&gt;</span><span class=p>,</span><span class=w> </span><span class=o>&lt;</span><span class=k>end</span><span class=w> </span><span class=k>position</span><span class=o>&gt;</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div></li><li><p>When nesting the query:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>...</span><span class=w> </span><span class=n>your</span><span class=w> </span><span class=n>combination</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=o>&lt;</span><span class=k>table</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- do code beautifier for your co-worker :)
</span></span></span></code></pre></div></li><li><p><strong>REPLACE()</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>REPLACE</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;hello world&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;hell&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;*Q#Q*&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Case sensitive
</span></span></span></code></pre></div></li><li><p><strong>REVERSE()</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>REVERSE</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;ÈïøÊÅ®ÈÄÅÂπ¥Ëä≥&#39;</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div></li><li><p><strong>CHAR_LENGTH()</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>## LENGTH mearsures in bits</span>
</span></span><span class=line><span class=cl>mysql&gt; SELECT 
</span></span><span class=line><span class=cl>    -&gt; LENGTH<span class=o>(</span><span class=s1>&#39;Êµ∑Ë±ö&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>+------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> LENGTH<span class=o>(</span><span class=s1>&#39;Êµ∑Ë±ö&#39;</span><span class=o>)</span>   <span class=p>|</span>
</span></span><span class=line><span class=cl>+------------------+
</span></span><span class=line><span class=cl><span class=p>|</span>                <span class=m>6</span> <span class=p>|</span>
</span></span><span class=line><span class=cl>+------------------+
</span></span><span class=line><span class=cl><span class=m>1</span> row in <span class=nb>set</span> <span class=o>(</span>0.00 sec<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mysql&gt; SELECT 
</span></span><span class=line><span class=cl>    -&gt; CHAR_LENGTH<span class=o>(</span><span class=s1>&#39;Êµ∑Ë±ö&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>+-----------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> CHAR_LENGTH<span class=o>(</span><span class=s1>&#39;Êµ∑Ë±ö&#39;</span><span class=o>)</span>   <span class=p>|</span>
</span></span><span class=line><span class=cl>+-----------------------+
</span></span><span class=line><span class=cl><span class=p>|</span>                     <span class=m>2</span> <span class=p>|</span>
</span></span><span class=line><span class=cl>+-----------------------+
</span></span><span class=line><span class=cl><span class=m>1</span> row in <span class=nb>set</span> <span class=o>(</span>0.00 sec<span class=o>)</span>
</span></span></code></pre></div></li><li><p><strong>UPPER</strong>/ UCASE and <strong>LOWER</strong>/LCASE</p></li><li><p><strong>INSERT</strong></p></li><li><p><strong>REPEAT</strong></p></li><li><p><strong>TRIM</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mysql&gt; SELECT TRIM<span class=o>(</span> TRAILING <span class=s1>&#39;.&#39;</span> FROM <span class=s1>&#39;..em..&#39;</span> <span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>+------------------------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> TRIM<span class=o>(</span> TRAILING <span class=s1>&#39;.&#39;</span> FROM <span class=s1>&#39;..em..&#39;</span> <span class=o>)</span> <span class=p>|</span>
</span></span><span class=line><span class=cl>+------------------------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> ..em                               <span class=p>|</span>
</span></span><span class=line><span class=cl>+------------------------------------+
</span></span><span class=line><span class=cl><span class=m>1</span> row in <span class=nb>set</span> <span class=o>(</span>0.00 sec<span class=o>)</span>
</span></span></code></pre></div></li></ul><p>Pratice time üôå</p><ul><li><p>Tips on writting function:</p><ul><li><p>Always following a &lsquo;(&rsquo; after the calling function, do not leave the space. E.g. This will cause error:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>## Error demostration</span>
</span></span><span class=line><span class=cl>mysql&gt; SELECT TRIM <span class=o>(</span>LEADING <span class=s1>&#39;.&#39;</span> FROM <span class=s1>&#39;...emmm...&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## Instead:</span>
</span></span><span class=line><span class=cl>mysql&gt; SELECT TRIM<span class=o>(</span>LEADING <span class=s1>&#39;.&#39;</span> FROM <span class=s1>&#39;...emmm...&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>+-------------------------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> TRIM<span class=o>(</span>LEADING <span class=s1>&#39;.&#39;</span> FROM <span class=s1>&#39;...emmm...&#39;</span><span class=o>)</span> <span class=p>|</span>
</span></span><span class=line><span class=cl>+-------------------------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> emmm...                             <span class=p>|</span>
</span></span><span class=line><span class=cl>+-------------------------------------+
</span></span><span class=line><span class=cl><span class=m>1</span> row in <span class=nb>set</span> <span class=o>(</span>0.00 sec<span class=o>)</span>
</span></span></code></pre></div></li><li><p>Put the Aliases name in to &rsquo; &rsquo; although the single word without quotation marks can be encoded correctly</p></li></ul></li></ul><p><a href=https://dev.mysql.com/doc/refman/8.0/en/string-functions.html>Function Cheatsheet</a></p><h3 id=selection>Selection<a hidden class=anchor aria-hidden=true href=#selection>#</a></h3><ul><li><p>select distinct elements</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=k>DISTINCT</span><span class=w> </span><span class=o>&lt;</span><span class=k>column</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>&lt;</span><span class=k>table</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- DISTINCT Applies to all following keys
</span></span></span></code></pre></div></li><li><p>ORDER BY</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>SELSELECT</span><span class=w> </span><span class=n>DISTINC</span><span class=w> </span><span class=n>author_lname</span><span class=p>,</span><span class=w> </span><span class=n>author_fname</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>books</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>author_lname</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- ORDER BY 2 (2nd selected columns)
</span></span></span><span class=line><span class=cl><span class=c1>-- ORDER BY author_lname, author_fname
</span></span></span></code></pre></div></li><li><p>LIMIT: limit the number of query return</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>DISTINC</span><span class=w> </span><span class=n>author_lname</span><span class=p>,</span><span class=w> </span><span class=n>author_fname</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>books</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>author_lname</span><span class=w> </span><span class=k>DESC</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=mi>10</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- LIMITE from 5 to 10th row
</span></span></span></code></pre></div></li><li><p>SEARCH: searching the characture</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>title</span><span class=p>,</span><span class=w> </span><span class=n>author_lname</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>books</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>author_lname</span><span class=w> </span><span class=k>LIKE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=s2>&#34;%da%&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- r&#39;%&#39;&#39; is equivlent to r&#39;.*&#39; in regular expression
</span></span></span></code></pre></div><pre tabindex=0><code>SQL search cheatsheet

% == .*
_ == .
&#39; == $ (at the end of the string)
\ == \ (ËΩ¨‰πâ)
</code></pre></li></ul><p>Pratice time üôå</p><ul><li><p>Tips:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>&lt;</span><span class=n>colum</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>another_name</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>books</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- AS goes first before FROM
</span></span></span></code></pre></div></li></ul><h2 id=crup>CRUP<a hidden class=anchor aria-hidden=true href=#crup>#</a></h2><ul><li><p><strong>CRUD</strong>: Create, Read, Update, Delete</p></li><li><p>Read:</p><ul><li><p>Conditional Statement: <strong>WHERER</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>&lt;</span><span class=k>column</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=p>,</span><span class=w> </span><span class=o>&lt;</span><span class=k>column</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=o>&lt;</span><span class=k>table</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=o>&lt;</span><span class=n>BOOL</span><span class=w> </span><span class=n>expression</span><span class=o>&gt;</span><span class=p>;</span><span class=w>	
</span></span></span></code></pre></div></li><li><p>Aliases Statement: <strong>AS</strong>, Temporary only for this query</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Shell data-lang=Shell><span class=line><span class=cl>mysql&gt;  SELECT name AS kettyname FROM cats<span class=p>;</span>
</span></span><span class=line><span class=cl>+----------------+
</span></span><span class=line><span class=cl><span class=p>|</span> kettyname      <span class=p>|</span>
</span></span><span class=line><span class=cl>+----------------+
</span></span><span class=line><span class=cl><span class=p>|</span> Ringo          <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Cindy          <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Dumbledore     <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Egg            <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Misty          <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> George Michael <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Jackson        <span class=p>|</span>
</span></span><span class=line><span class=cl>+----------------+
</span></span></code></pre></div></li></ul></li><li><p>Update:</p><ul><li><p>Always from a table prospect using the SQL</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>UPDATE</span><span class=w> </span><span class=o>&lt;</span><span class=n>able</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=o>&lt;</span><span class=n>cloumn</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&lt;</span><span class=n>value</span><span class=o>&gt;</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=p>...</span><span class=w>
</span></span></span></code></pre></div></li><li><p>Rule of üëç: Try selecting before update. Make sure your target is correct.</p></li><li><p>Notice the data type when amending.</p></li></ul></li><li><p>Delete (Destroy:/ ):</p><ul><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>DELETE</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>&lt;</span><span class=k>table</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=p>..</span><span class=w>
</span></span></span></code></pre></div></li><li><p>Notice the difference from DROP: DELETE will at least leave an empty set.</p></li><li><p>Try Selecting before as well.</p></li></ul></li></ul><p>Pratice time üôå</p><ul><li><p>Leave enough space when naming each column. If not:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- modify the attributes of column
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=o>&lt;</span><span class=k>table</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=w> </span><span class=k>MODIFY</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=o>&lt;</span><span class=k>column</span><span class=w> </span><span class=n>name</span><span class=o>&gt;</span><span class=w> </span><span class=o>&lt;</span><span class=k>new</span><span class=w> </span><span class=k>data</span><span class=w> </span><span class=k>type</span><span class=o>&gt;</span><span class=w>
</span></span></span></code></pre></div></li><li><p>The PRIMARY KEY setting will set NOT NULL by default</p></li></ul><h2 id=data-type-time>Data Type (Time)<a hidden class=anchor aria-hidden=true href=#data-type-time>#</a></h2><ul><li><p>Text</p></li><li><p>Decimal <code>DECIMAL(5,2)</code></p></li><li><p>FLoat</p></li><li><p>DATE: <code>YYYY-MM-DD</code></p></li><li><p>TIME: <code>hh:mm:ss</code></p></li><li><p>DATETIME: <code>YYYY-MM-DD hh:mm:ss</code></p></li><li><p>CURDATE / CURTIME / NOW</p></li><li><p><code>IFNULL(&lt;column name>, replacement)</code></p></li><li><p>Time Stamp : Similar to datetime by only supports much smaller range</p></li><li><p><strong>On update</strong>: one more extra</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mysql&gt; DESC caption<span class=p>;</span>
</span></span><span class=line><span class=cl>+-----------+--------------+------+-----+-------------------+-----------------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> Field     <span class=p>|</span> Type         <span class=p>|</span> Null <span class=p>|</span> Key <span class=p>|</span> Default           <span class=p>|</span> Extra                       <span class=p>|</span>
</span></span><span class=line><span class=cl>+-----------+--------------+------+-----+-------------------+-----------------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> text      <span class=p>|</span> varchar<span class=o>(</span>200<span class=o>)</span> <span class=p>|</span> YES  <span class=p>|</span>     <span class=p>|</span> NULL              <span class=p>|</span>                             <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> create_at <span class=p>|</span> timestamp    <span class=p>|</span> YES  <span class=p>|</span>     <span class=p>|</span> CURRENT_TIMESTAMP <span class=p>|</span> DEFAULT_GENERATED           <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> update_at <span class=p>|</span> timestamp    <span class=p>|</span> YES  <span class=p>|</span>     <span class=p>|</span> NULL              <span class=p>|</span> on update CURRENT_TIMESTAMP <span class=p>|</span>
</span></span><span class=line><span class=cl>+-----------+--------------+------+-----+-------------------+-----------------------------+
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mysql&gt; INSERT INTO caption <span class=o>(</span>text<span class=o>)</span> VALUES<span class=o>(</span><span class=s1>&#39;hello&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>Query OK, <span class=m>1</span> row affected <span class=o>(</span>0.00 sec<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mysql&gt; SELECT * FROM caption<span class=p>;</span>
</span></span><span class=line><span class=cl>+-------+---------------------+-----------+
</span></span><span class=line><span class=cl><span class=p>|</span> text  <span class=p>|</span> create_at           <span class=p>|</span> update_at <span class=p>|</span>
</span></span><span class=line><span class=cl>+-------+---------------------+-----------+
</span></span><span class=line><span class=cl><span class=p>|</span> hello <span class=p>|</span> 2023-06-16 14:38:47 <span class=p>|</span> NULL      <span class=p>|</span>
</span></span><span class=line><span class=cl>+-------+---------------------+-----------+
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mysql&gt; UPDATE caption SET <span class=nv>text</span> <span class=o>=</span> <span class=s1>&#39;hello!!&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>Query OK, <span class=m>1</span> row affected <span class=o>(</span>0.01 sec<span class=o>)</span>
</span></span><span class=line><span class=cl>Rows matched: <span class=m>1</span>  Changed: <span class=m>1</span>  Warnings: <span class=m>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mysql&gt; SELECT * FROM caption<span class=p>;</span>
</span></span><span class=line><span class=cl>+---------+---------------------+---------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> text    <span class=p>|</span> create_at           <span class=p>|</span> update_at           <span class=p>|</span>
</span></span><span class=line><span class=cl>+---------+---------------------+---------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> hello!! <span class=p>|</span> 2023-06-16 14:38:47 <span class=p>|</span> 2023-06-16 14:39:37 <span class=p>|</span>
</span></span><span class=line><span class=cl>+---------+---------------------+---------------------+
</span></span></code></pre></div></li><li><p>Change the format of time:</p><ul><li><p><strong>DATE_FORMAT</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mysql&gt;  SELECT DATE_FORMAT<span class=o>(</span>NOW<span class=o>()</span>, <span class=s1>&#39;%d-%m-%Y&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>+--------------------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> DATE_FORMAT<span class=o>(</span>NOW<span class=o>()</span>, <span class=s1>&#39;%d-%m-%Y&#39;</span><span class=o>)</span> <span class=p>|</span>
</span></span><span class=line><span class=cl>+--------------------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> 16-06-2023                     <span class=p>|</span>
</span></span><span class=line><span class=cl>+--------------------------------+
</span></span></code></pre></div></li><li><p><a href=https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html>format Ref</a></p></li></ul></li></ul><h2 id=logical-operation>Logical Operation<a hidden class=anchor aria-hidden=true href=#logical-operation>#</a></h2><ul><li><p>Not equal <code>!=</code></p></li><li><p>Not like <code>NOT LIKE</code></p></li><li><p>Greater than <code>></code></p></li><li><p>AND <code>AND</code></p></li><li><p>OR <code>OR</code></p></li><li><p>BETWEEN <code>BETWEEN .. AND ...</code></p></li><li><p>IN <code>IN: </code>(NOT IN as well)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>WHERE</span><span class=w> </span><span class=n>author_lname</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;Bobby&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Baobi&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Buobi&#39;</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div></li><li><p>CASE STATMENT</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>title</span><span class=p>,</span><span class=w> </span><span class=n>released_year</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CASE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>WHEN</span><span class=w> </span><span class=n>released_year</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>2000</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;Morden lit&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>WHEN</span><span class=w> </span><span class=p>..</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=p>..</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>WHEN</span><span class=w> </span><span class=p>..</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=p>..</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>ELSE</span><span class=w> </span><span class=p>..</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>END</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=p>..</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>books</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div></li><li><p><code>IS NULL</code></p></li></ul><h2 id=aggregation>Aggregation<a hidden class=anchor aria-hidden=true href=#aggregation>#</a></h2><ul><li><p>Count</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=n>author_laname</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>books</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- COUNT(*) has only_form_by_whole_group attribute
</span></span></span><span class=line><span class=cl><span class=c1>-- COUNT omits the NULL values
</span></span></span></code></pre></div></li><li><p><strong>Group By</strong> (the result is like clustering)#</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mysql&gt; SELECT COUNT<span class=o>(</span>*<span class=o>)</span> FROM books GROUP BY author_lname<span class=p>;</span>
</span></span><span class=line><span class=cl>+----------+
</span></span><span class=line><span class=cl><span class=p>|</span> COUNT<span class=o>(</span>*<span class=o>)</span> <span class=p>|</span>
</span></span><span class=line><span class=cl>+----------+
</span></span><span class=line><span class=cl><span class=p>|</span>        <span class=m>2</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>        <span class=m>3</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>        <span class=m>3</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>        <span class=m>1</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>        <span class=m>1</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>        <span class=m>2</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>        <span class=m>1</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>        <span class=m>1</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>        <span class=m>2</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>        <span class=m>2</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>        <span class=m>1</span> <span class=p>|</span>
</span></span><span class=line><span class=cl>+----------+
</span></span><span class=line><span class=cl><span class=m>11</span> rows in <span class=nb>set</span> <span class=o>(</span>0.00 sec<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mysql&gt; SELECT COUNT<span class=o>(</span>*<span class=o>)</span> FROM books<span class=p>;</span>
</span></span><span class=line><span class=cl>+----------+
</span></span><span class=line><span class=cl><span class=p>|</span> COUNT<span class=o>(</span>*<span class=o>)</span> <span class=p>|</span>
</span></span><span class=line><span class=cl>+----------+
</span></span><span class=line><span class=cl><span class=p>|</span>       <span class=m>19</span> <span class=p>|</span>
</span></span><span class=line><span class=cl>+----------+
</span></span><span class=line><span class=cl><span class=m>1</span> row in <span class=nb>set</span> <span class=o>(</span>0.00 sec<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mysql&gt; SELECT * FROM books GROUP BY author_lname<span class=p>;</span>
</span></span><span class=line><span class=cl>ERROR <span class=m>1055</span> <span class=o>(</span>42000<span class=o>)</span>: Expression <span class=c1>#1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#39;book_shop.books.book_id&#39; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mysql&gt; SELECT author_lname FROM books GROUP BY author_lname<span class=p>;</span>
</span></span><span class=line><span class=cl>+----------------+
</span></span><span class=line><span class=cl><span class=p>|</span> author_lname   <span class=p>|</span>
</span></span><span class=line><span class=cl>+----------------+
</span></span><span class=line><span class=cl><span class=p>|</span> Lahiri         <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Gaiman         <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Eggers         <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Chabon         <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Smith          <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Carver         <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> DeLillo        <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Steinbeck      <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Foster Wallace <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Harris         <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Saunders       <span class=p>|</span>
</span></span><span class=line><span class=cl>+----------------+
</span></span><span class=line><span class=cl><span class=m>11</span> rows in <span class=nb>set</span> <span class=o>(</span>0.00 sec<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># notice how * refers to different targets when using GROUP BY</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mysql&gt; SELECT CONCAT<span class=o>(</span>author_lname,<span class=s1>&#39; &#39;</span>,author_fname<span class=o>)</span> AS author FROM books GROUP BY author<span class=p>;</span>
</span></span><span class=line><span class=cl>+----------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> author               <span class=p>|</span>
</span></span><span class=line><span class=cl>+----------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> Lahiri Jhumpa        <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Gaiman Neil          <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Eggers Dave          <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Chabon Michael       <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Smith Patti          <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Carver Raymond       <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> DeLillo Don          <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Steinbeck John       <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Foster Wallace David <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Harris Dan           <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Harris Freida        <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Saunders George      <span class=p>|</span>
</span></span><span class=line><span class=cl>+----------------------+
</span></span><span class=line><span class=cl><span class=m>12</span> rows in <span class=nb>set</span> <span class=o>(</span>0.00 sec<span class=o>)</span>
</span></span></code></pre></div></li><li><p>MIN/MAX</p></li><li><p>Sub query</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mysql&gt; SELECT title, pages FROM books WHERE <span class=nv>pages</span><span class=o>=(</span>SELECT MAX<span class=o>(</span>pages<span class=o>)</span> FROM books<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>+-------------------------------------------+-------+
</span></span><span class=line><span class=cl><span class=p>|</span> title                                     <span class=p>|</span> pages <span class=p>|</span>
</span></span><span class=line><span class=cl>+-------------------------------------------+-------+
</span></span><span class=line><span class=cl><span class=p>|</span> The Amazing Adventures of Kavalier <span class=p>&amp;</span> Clay <span class=p>|</span>   <span class=m>634</span> <span class=p>|</span>
</span></span><span class=line><span class=cl>+-------------------------------------------+-------+
</span></span><span class=line><span class=cl><span class=m>1</span> row in <span class=nb>set</span> <span class=o>(</span>0.00 sec<span class=o>)</span>
</span></span></code></pre></div></li><li><p>Group BY + MIN/Max</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=o>##</span><span class=w> </span><span class=k>Not</span><span class=w> </span><span class=n>working</span><span class=w> </span><span class=p>:(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=n>author_lname</span><span class=p>,</span><span class=w> </span><span class=n>released_year</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>-&gt;</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>books</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>-&gt;</span><span class=w> </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>author_lname</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>ERROR</span><span class=w> </span><span class=mi>1055</span><span class=w> </span><span class=p>(</span><span class=mi>42000</span><span class=p>):</span><span class=w> </span><span class=n>Expression</span><span class=w> </span><span class=o>#</span><span class=mi>2</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=n>list</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>clause</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=k>contains</span><span class=w> </span><span class=n>nonaggregated</span><span class=w> </span><span class=k>column</span><span class=w> </span><span class=s1>&#39;book_shop.books.released_year&#39;</span><span class=w> </span><span class=n>which</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=n>functionally</span><span class=w> </span><span class=n>dependent</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>columns</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>clause</span><span class=p>;</span><span class=w> </span><span class=n>this</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=n>incompatible</span><span class=w> </span><span class=k>with</span><span class=w> </span><span class=n>sql_mode</span><span class=o>=</span><span class=n>only_full_group_by</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>##</span><span class=w> </span><span class=n>working</span><span class=w> </span><span class=p>:)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=n>author_lname</span><span class=p>,</span><span class=w> </span><span class=k>MIN</span><span class=p>(</span><span class=n>released_year</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>-&gt;</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>books</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>-&gt;</span><span class=w> </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>author_lname</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>----------------+--------------------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>|</span><span class=w> </span><span class=n>author_lname</span><span class=w>   </span><span class=o>|</span><span class=w> </span><span class=k>MIN</span><span class=p>(</span><span class=n>released_year</span><span class=p>)</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>----------------+--------------------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>|</span><span class=w> </span><span class=n>Lahiri</span><span class=w>         </span><span class=o>|</span><span class=w>               </span><span class=mi>1996</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>Gaiman</span><span class=w>         </span><span class=o>|</span><span class=w>               </span><span class=mi>2001</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>Eggers</span><span class=w>         </span><span class=o>|</span><span class=w>               </span><span class=mi>2001</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>Chabon</span><span class=w>         </span><span class=o>|</span><span class=w>               </span><span class=mi>2000</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>Smith</span><span class=w>          </span><span class=o>|</span><span class=w>               </span><span class=mi>2010</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>Carver</span><span class=w>         </span><span class=o>|</span><span class=w>               </span><span class=mi>1981</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>DeLillo</span><span class=w>        </span><span class=o>|</span><span class=w>               </span><span class=mi>1985</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>Steinbeck</span><span class=w>      </span><span class=o>|</span><span class=w>               </span><span class=mi>1945</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>Foster</span><span class=w> </span><span class=n>Wallace</span><span class=w> </span><span class=o>|</span><span class=w>               </span><span class=mi>2004</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>Harris</span><span class=w>         </span><span class=o>|</span><span class=w>               </span><span class=mi>2001</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>Saunders</span><span class=w>       </span><span class=o>|</span><span class=w>               </span><span class=mi>2017</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>----------------+--------------------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=mi>11</span><span class=w> </span><span class=k>rows</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span><span class=w> </span><span class=n>sec</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div></li><li><p>Notice the concept of <strong>Aggregation Function</strong>, Group By only works with the aggregation functions (MIN/MAX/SUM/AVG)</p></li></ul><p>Reference: <a href=https://dev.mysql.com/doc/refman/8.0/en/aggregate-functions.html>https://dev.mysql.com/doc/refman/8.0/en/aggregate-functions.html</a></p><h2 id=constrains--alter>Constrains & Alter<a hidden class=anchor aria-hidden=true href=#constrains--alter>#</a></h2><ul><li><p>Unique</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>contacts</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>Name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>150</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>Phone</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>12</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>UNIQUE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mysql&gt; DESC contacts<span class=p>;</span>
</span></span><span class=line><span class=cl>+-------+--------------+------+-----+---------+-------+
</span></span><span class=line><span class=cl><span class=p>|</span> Field <span class=p>|</span> Type         <span class=p>|</span> Null <span class=p>|</span> Key <span class=p>|</span> Default <span class=p>|</span> Extra <span class=p>|</span>
</span></span><span class=line><span class=cl>+-------+--------------+------+-----+---------+-------+
</span></span><span class=line><span class=cl><span class=p>|</span> Name  <span class=p>|</span> varchar<span class=o>(</span>150<span class=o>)</span> <span class=p>|</span> NO   <span class=p>|</span>     <span class=p>|</span> NULL    <span class=p>|</span>       <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> Phone <span class=p>|</span> varchar<span class=o>(</span>12<span class=o>)</span>  <span class=p>|</span> NO   <span class=p>|</span> PRI <span class=p>|</span> NULL    <span class=p>|</span>       <span class=p>|</span>
</span></span><span class=line><span class=cl>+-------+--------------+------+-----+---------+-------+
</span></span></code></pre></div></li><li><p>Check / Constrains</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>partiers</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>Name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>150</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>Age</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>CHECK</span><span class=w> </span><span class=p>(</span><span class=n>age</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>18</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Equivlent
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>partiers</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>Name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>150</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>Age</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>CONSTRAINT</span><span class=w> </span><span class=n>adult_check</span><span class=w> </span><span class=k>CHECK</span><span class=w> </span><span class=p>(</span><span class=n>Age</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>18</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div></li><li><p>Multi-column Constrains</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>companies</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>150</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>address</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>300</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>CONSTRAINT</span><span class=w> </span><span class=n>name_address</span><span class=w> </span><span class=k>UNIQUE</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>address</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div></li><li><p>ALL in one place to change the attribute of the table: ALTER</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- Add a column
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>companies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ADD</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=k>type</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>&#39;Ltd&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Drop a column
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>companies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>DROP</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=k>type</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>&#39;Ltd&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Rename a table
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>companies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>RENAME</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=n>suppliers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Rename a column
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>companies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>RENAME</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=k>type</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>Categories</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Modify the existing column
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>companies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>MODIFY</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=o>&lt;</span><span class=k>new</span><span class=w> </span><span class=k>constraint</span><span class=o>&gt;</span><span class=w>
</span></span></span></code></pre></div></li><li><p>Tips: Check all constraints</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>USER_CONSTRAINTS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- It will return all constraints in the selected database
</span></span></span></code></pre></div></li><li></li></ul><h2 id=one-2-many>One 2 Many<a hidden class=anchor aria-hidden=true href=#one-2-many>#</a></h2><ul><li><p>How to manage the data ? by relationship:</p><ul><li><strong>One to one relationship</strong><ul><li>table 1: basic info of customers | table2: details of customers | customer as the key</li></ul></li><li><strong>One to Many relationship (*)</strong><ul><li>One book to many of reviews</li></ul></li><li><strong>Many to many relationship</strong><ul><li>Books and authors: books can have multiple authors, the author can also have many books</li></ul></li></ul></li><li><p><strong>One to many</strong>: Take customers and orders for example:</p></li><li><ul><li><p><strong>Primary Key</strong>: Some particular column that always unique</p></li><li><p><strong>Foreign Key</strong>: Reference to other table</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- how to use foreign key to link two tables?
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- table 1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>customers</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>id</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=n>AUTO_INCREMENT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>first_name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>last_name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>email</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span><span class=w> </span><span class=k>UNIQUE</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- table 2
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>orders</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>id</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=n>AUTO_INCREMENT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>order_date</span><span class=w> </span><span class=nb>DATE</span><span class=p>,</span><span class=n>DES</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>customer_id</span><span class=w> </span><span class=nb>INT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>customer_id</span><span class=p>)</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>customers</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div></li><li><p>Cross Join: dummy emmumerated combination of two table</p></li><li><p>Inner Join:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>customers</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>JOIN</span><span class=w> </span><span class=n>orders</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>orders</span><span class=p>.</span><span class=n>customer_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>customers</span><span class=p>.</span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>customers</span><span class=w>  </span><span class=k>JOIN</span><span class=w> </span><span class=n>orders</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>orders</span><span class=p>.</span><span class=n>customer_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>customers</span><span class=p>.</span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>----+------------+-----------+------------------+----+------------+--------+-------------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>|</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>first_name</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>last_name</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>email</span><span class=w>            </span><span class=o>|</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>order_date</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>amount</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>customer_id</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>----+------------+-----------+------------------+----+------------+--------+-------------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>|</span><span class=w>  </span><span class=mi>1</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>Boy</span><span class=w>        </span><span class=o>|</span><span class=w> </span><span class=n>George</span><span class=w>    </span><span class=o>|</span><span class=w> </span><span class=n>george</span><span class=o>@</span><span class=n>gmail</span><span class=p>.</span><span class=n>com</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>1</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>2016</span><span class=o>-</span><span class=mi>02</span><span class=o>-</span><span class=mi>10</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>99</span><span class=p>.</span><span class=mi>99</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>1</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w>  </span><span class=mi>1</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>Boy</span><span class=w>        </span><span class=o>|</span><span class=w> </span><span class=n>George</span><span class=w>    </span><span class=o>|</span><span class=w> </span><span class=n>george</span><span class=o>@</span><span class=n>gmail</span><span class=p>.</span><span class=n>com</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>2</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>2017</span><span class=o>-</span><span class=mi>11</span><span class=o>-</span><span class=mi>11</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>35</span><span class=p>.</span><span class=mi>50</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>1</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w>  </span><span class=mi>2</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>George</span><span class=w>     </span><span class=o>|</span><span class=w> </span><span class=n>Michael</span><span class=w>   </span><span class=o>|</span><span class=w> </span><span class=n>gm</span><span class=o>@</span><span class=n>gmail</span><span class=p>.</span><span class=n>com</span><span class=w>     </span><span class=o>|</span><span class=w>  </span><span class=mi>3</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>2014</span><span class=o>-</span><span class=mi>12</span><span class=o>-</span><span class=mi>12</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>800</span><span class=p>.</span><span class=mi>67</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>2</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w>  </span><span class=mi>2</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>George</span><span class=w>     </span><span class=o>|</span><span class=w> </span><span class=n>Michael</span><span class=w>   </span><span class=o>|</span><span class=w> </span><span class=n>gm</span><span class=o>@</span><span class=n>gmail</span><span class=p>.</span><span class=n>com</span><span class=w>     </span><span class=o>|</span><span class=w>  </span><span class=mi>4</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>2015</span><span class=o>-</span><span class=mi>01</span><span class=o>-</span><span class=mi>03</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>12</span><span class=p>.</span><span class=mi>50</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>2</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w>  </span><span class=mi>5</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>Bette</span><span class=w>      </span><span class=o>|</span><span class=w> </span><span class=n>Davis</span><span class=w>     </span><span class=o>|</span><span class=w> </span><span class=n>bette</span><span class=o>@</span><span class=n>aol</span><span class=p>.</span><span class=n>com</span><span class=w>    </span><span class=o>|</span><span class=w>  </span><span class=mi>5</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>1999</span><span class=o>-</span><span class=mi>04</span><span class=o>-</span><span class=mi>11</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>450</span><span class=p>.</span><span class=mi>25</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>5</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>----+------------+-----------+------------------+----+------------+--------+-------------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=mi>5</span><span class=w> </span><span class=k>rows</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span><span class=w> </span><span class=n>sec</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div></li><li><p>Left Join / Right join:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>customers</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>LEFT</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>orders</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>orders</span><span class=p>.</span><span class=n>customer_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>customers</span><span class=p>.</span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>customers</span><span class=w> </span><span class=k>LEFT</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>orders</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>orders</span><span class=p>.</span><span class=n>customer_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>customers</span><span class=p>.</span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>----+------------+-----------+------------------+------+------------+--------+-------------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>|</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>first_name</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>last_name</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>email</span><span class=w>            </span><span class=o>|</span><span class=w> </span><span class=n>id</span><span class=w>   </span><span class=o>|</span><span class=w> </span><span class=n>order_date</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>amount</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>customer_id</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>----+------------+-----------+------------------+------+------------+--------+-------------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>|</span><span class=w>  </span><span class=mi>1</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>Boy</span><span class=w>        </span><span class=o>|</span><span class=w> </span><span class=n>George</span><span class=w>    </span><span class=o>|</span><span class=w> </span><span class=n>george</span><span class=o>@</span><span class=n>gmail</span><span class=p>.</span><span class=n>com</span><span class=w> </span><span class=o>|</span><span class=w>    </span><span class=mi>1</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>2016</span><span class=o>-</span><span class=mi>02</span><span class=o>-</span><span class=mi>10</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>99</span><span class=p>.</span><span class=mi>99</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>1</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w>  </span><span class=mi>1</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>Boy</span><span class=w>        </span><span class=o>|</span><span class=w> </span><span class=n>George</span><span class=w>    </span><span class=o>|</span><span class=w> </span><span class=n>george</span><span class=o>@</span><span class=n>gmail</span><span class=p>.</span><span class=n>com</span><span class=w> </span><span class=o>|</span><span class=w>    </span><span class=mi>2</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>2017</span><span class=o>-</span><span class=mi>11</span><span class=o>-</span><span class=mi>11</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>35</span><span class=p>.</span><span class=mi>50</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>1</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w>  </span><span class=mi>2</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>George</span><span class=w>     </span><span class=o>|</span><span class=w> </span><span class=n>Michael</span><span class=w>   </span><span class=o>|</span><span class=w> </span><span class=n>gm</span><span class=o>@</span><span class=n>gmail</span><span class=p>.</span><span class=n>com</span><span class=w>     </span><span class=o>|</span><span class=w>    </span><span class=mi>3</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>2014</span><span class=o>-</span><span class=mi>12</span><span class=o>-</span><span class=mi>12</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>800</span><span class=p>.</span><span class=mi>67</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>2</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w>  </span><span class=mi>2</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>George</span><span class=w>     </span><span class=o>|</span><span class=w> </span><span class=n>Michael</span><span class=w>   </span><span class=o>|</span><span class=w> </span><span class=n>gm</span><span class=o>@</span><span class=n>gmail</span><span class=p>.</span><span class=n>com</span><span class=w>     </span><span class=o>|</span><span class=w>    </span><span class=mi>4</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>2015</span><span class=o>-</span><span class=mi>01</span><span class=o>-</span><span class=mi>03</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>12</span><span class=p>.</span><span class=mi>50</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>2</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w>  </span><span class=mi>3</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>David</span><span class=w>      </span><span class=o>|</span><span class=w> </span><span class=n>Bowie</span><span class=w>     </span><span class=o>|</span><span class=w> </span><span class=n>david</span><span class=o>@</span><span class=n>gmail</span><span class=p>.</span><span class=n>com</span><span class=w>  </span><span class=o>|</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>NULL</span><span class=w>       </span><span class=o>|</span><span class=w>   </span><span class=k>NULL</span><span class=w> </span><span class=o>|</span><span class=w>        </span><span class=k>NULL</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w>  </span><span class=mi>4</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>Blue</span><span class=w>       </span><span class=o>|</span><span class=w> </span><span class=n>Steele</span><span class=w>    </span><span class=o>|</span><span class=w> </span><span class=n>blue</span><span class=o>@</span><span class=n>gmail</span><span class=p>.</span><span class=n>com</span><span class=w>   </span><span class=o>|</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>NULL</span><span class=w>       </span><span class=o>|</span><span class=w>   </span><span class=k>NULL</span><span class=w> </span><span class=o>|</span><span class=w>        </span><span class=k>NULL</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w>  </span><span class=mi>5</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>Bette</span><span class=w>      </span><span class=o>|</span><span class=w> </span><span class=n>Davis</span><span class=w>     </span><span class=o>|</span><span class=w> </span><span class=n>bette</span><span class=o>@</span><span class=n>aol</span><span class=p>.</span><span class=n>com</span><span class=w>    </span><span class=o>|</span><span class=w>    </span><span class=mi>5</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>1999</span><span class=o>-</span><span class=mi>04</span><span class=o>-</span><span class=mi>11</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>450</span><span class=p>.</span><span class=mi>25</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>5</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>----+------------+-----------+------------------+------+------------+--------+-------------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>#</span><span class=w> </span><span class=n>Notice</span><span class=w> </span><span class=k>some</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=n>doesn</span><span class=s1>&#39;t have order info but still be merged into the new table
</span></span></span></code></pre></div></li><li><p>Delete with the foriegn key constraints</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- table 2
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>orders</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>id</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=n>AUTO_INCREMENT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>order_date</span><span class=w> </span><span class=nb>DATE</span><span class=p>,</span><span class=n>DES</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>customer_id</span><span class=w> </span><span class=nb>INT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>customer_id</span><span class=p>)</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>customers</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=n>CASECADE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div></li></ul></li></ul><h2 id=view>View<a hidden class=anchor aria-hidden=true href=#view>#</a></h2><ul><li><p>VIEWS</p><ul><li>Creating a cache table</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=n>new_list</span><span class=w> </span><span class=k>AS</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=p>...</span><span class=w>
</span></span></span></code></pre></div><ul><li>Can & Can&rsquo;t<ul><li>can&rsquo;t: Join, Update (Depend on the view table type )</li></ul></li><li>Over-write to correct</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=k>REPLACE</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=p>...</span><span class=w>
</span></span></span></code></pre></div></li><li><p>GROUP BY HAVING:</p><ul><li>Silimar to <code>WHERE</code> but applied with<code>GROUP BY</code></li></ul></li><li><p>GROUP BY WITH ROLLUP:</p><ul><li>The Aggrigation of aggrigation</li></ul></li><li><p>SQL MODES</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>@@</span><span class=k>GLOBAL</span><span class=p>.</span><span class=n>sql_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SET</span><span class=w> </span><span class=k>GLOBAL</span><span class=w> </span><span class=n>sql_mode</span><span class=o>=</span><span class=s1>&#39;modes&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=o>@@</span><span class=k>SESSION</span><span class=p>.</span><span class=n>sql_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SET</span><span class=w> </span><span class=k>SESSION</span><span class=w> </span><span class=n>sql_mode</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;mode,..&#39;</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=o>+</span><span class=c1>-----------------------------------------------------------------------------------------------------------------------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>|</span><span class=w> </span><span class=o>@@</span><span class=k>GLOBAL</span><span class=p>.</span><span class=n>sql_mode</span><span class=w>                                                                                                     </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>-----------------------------------------------------------------------------------------------------------------------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>|</span><span class=w> </span><span class=n>ONLY_FULL_GROUP_BY</span><span class=p>,</span><span class=n>STRICT_TRANS_TABLES</span><span class=p>,</span><span class=n>NO_ZERO_IN_DATE</span><span class=p>,</span><span class=n>NO_ZERO_DATE</span><span class=p>,</span><span class=n>ERROR_FOR_DIVISION_BY_ZERO</span><span class=p>,</span><span class=n>NO_ENGINE_SUBSTITUTION</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>-----------------------------------------------------------------------------------------------------------------------+
</span></span></span></code></pre></div><ul><li>Modes:<ul><li>STRICT_TRANS_TABLES: Strict constraints on the data type conversion</li><li>ONLY_FULL_BY:</li></ul></li></ul></li></ul><h2 id=window-function>Window function<a hidden class=anchor aria-hidden=true href=#window-function>#</a></h2><ul><li><p>Window function</p><ul><li>Silimar to window function But append aggregation results on each row</li></ul></li><li><p>OVER( PARTITION BY )</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=n>department</span><span class=p>,</span><span class=w> </span><span class=n>salary</span><span class=p>,</span><span class=w> </span><span class=k>AVG</span><span class=p>(</span><span class=n>salary</span><span class=p>)</span><span class=w> </span><span class=n>OVER</span><span class=p>(</span><span class=n>x</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>department</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>employees</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>------------------+--------+-------------------------------------------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>|</span><span class=w> </span><span class=n>department</span><span class=w>       </span><span class=o>|</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>AVG</span><span class=p>(</span><span class=n>salary</span><span class=p>)</span><span class=w> </span><span class=n>OVER</span><span class=p>(</span><span class=n>PARTITION</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>department</span><span class=p>)</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>------------------+--------+-------------------------------------------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>|</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>38000</span><span class=w> </span><span class=o>|</span><span class=w>                                </span><span class=mi>46571</span><span class=p>.</span><span class=mi>4286</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>45000</span><span class=w> </span><span class=o>|</span><span class=w>                                </span><span class=mi>46571</span><span class=p>.</span><span class=mi>4286</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>61000</span><span class=w> </span><span class=o>|</span><span class=w>                                </span><span class=mi>46571</span><span class=p>.</span><span class=mi>4286</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>40000</span><span class=w> </span><span class=o>|</span><span class=w>                                </span><span class=mi>46571</span><span class=p>.</span><span class=mi>4286</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>31000</span><span class=w> </span><span class=o>|</span><span class=w>                                </span><span class=mi>46571</span><span class=p>.</span><span class=mi>4286</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>56000</span><span class=w> </span><span class=o>|</span><span class=w>                                </span><span class=mi>46571</span><span class=p>.</span><span class=mi>4286</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>55000</span><span class=w> </span><span class=o>|</span><span class=w>                                </span><span class=mi>46571</span><span class=p>.</span><span class=mi>4286</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>engineering</span><span class=w>      </span><span class=o>|</span><span class=w>  </span><span class=mi>80000</span><span class=w> </span><span class=o>|</span><span class=w>                                </span><span class=mi>81285</span><span class=p>.</span><span class=mi>7143</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>engineering</span><span class=w>      </span><span class=o>|</span><span class=w>  </span><span class=mi>69000</span><span class=w> </span><span class=o>|</span><span class=w>                                </span><span class=mi>81285</span><span class=p>.</span><span class=mi>7143</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span></code></pre></div><ul><li>OVER( ORDER BY): rolling style</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=n>department</span><span class=p>,</span><span class=w> </span><span class=n>salary</span><span class=p>,</span><span class=w> </span><span class=k>SUM</span><span class=p>(</span><span class=n>salary</span><span class=p>)</span><span class=w> </span><span class=n>OVER</span><span class=p>(</span><span class=n>PARTITION</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>department</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=k>ASC</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>depart_avg_rolling</span><span class=p>,</span><span class=w> </span><span class=k>SUM</span><span class=p>(</span><span class=n>salary</span><span class=p>)</span><span class=w> </span><span class=n>OVER</span><span class=p>(</span><span class=n>PARTITION</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>department</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>depart_avg</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>employees</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>------------------+--------+--------------------+------------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>|</span><span class=w> </span><span class=n>department</span><span class=w>       </span><span class=o>|</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>depart_avg_rolling</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>depart_avg</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>------------------+--------+--------------------+------------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>|</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>31000</span><span class=w> </span><span class=o>|</span><span class=w>              </span><span class=mi>31000</span><span class=w> </span><span class=o>|</span><span class=w>     </span><span class=mi>326000</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>38000</span><span class=w> </span><span class=o>|</span><span class=w>              </span><span class=mi>69000</span><span class=w> </span><span class=o>|</span><span class=w>     </span><span class=mi>326000</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>40000</span><span class=w> </span><span class=o>|</span><span class=w>             </span><span class=mi>109000</span><span class=w> </span><span class=o>|</span><span class=w>     </span><span class=mi>326000</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>45000</span><span class=w> </span><span class=o>|</span><span class=w>             </span><span class=mi>154000</span><span class=w> </span><span class=o>|</span><span class=w>     </span><span class=mi>326000</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>55000</span><span class=w> </span><span class=o>|</span><span class=w>             </span><span class=mi>209000</span><span class=w> </span><span class=o>|</span><span class=w>     </span><span class=mi>326000</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>56000</span><span class=w> </span><span class=o>|</span><span class=w>             </span><span class=mi>265000</span><span class=w> </span><span class=o>|</span><span class=w>     </span><span class=mi>326000</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=o>|</span><span class=w>  </span><span class=mi>61000</span><span class=w> </span><span class=o>|</span><span class=w>             </span><span class=mi>326000</span><span class=w> </span><span class=o>|</span><span class=w>     </span><span class=mi>326000</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>engineering</span><span class=w>      </span><span class=o>|</span><span class=w>  </span><span class=mi>67000</span><span class=w> </span><span class=o>|</span><span class=w>              </span><span class=mi>67000</span><span class=w> </span><span class=o>|</span><span class=w>     </span><span class=mi>569000</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>engineering</span><span class=w>      </span><span class=o>|</span><span class=w>  </span><span class=mi>69000</span><span class=w> </span><span class=o>|</span><span class=w>             </span><span class=mi>136000</span><span class=w> </span><span class=o>|</span><span class=w>     </span><span class=mi>569000</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>engineering</span><span class=w>      </span><span class=o>|</span><span class=w>  </span><span class=mi>70000</span><span class=w> </span><span class=o>|</span><span class=w>             </span><span class=mi>206000</span><span class=w> </span><span class=o>|</span><span class=w>     </span><span class=mi>569000</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>engineering</span><span class=w>      </span><span class=o>|</span><span class=w>  </span><span class=mi>80000</span><span class=w> </span><span class=o>|</span><span class=w>             </span><span class=mi>286000</span><span class=w> </span><span class=o>|</span><span class=w>     </span><span class=mi>569000</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span></code></pre></div><ul><li><code>RANK() OVER( ORDER BY)</code></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=n>department</span><span class=p>,</span><span class=w> </span><span class=n>salary</span><span class=p>,</span><span class=n>RANK</span><span class=p>()</span><span class=w> </span><span class=n>OVER</span><span class=p>(</span><span class=n>PARTITION</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>department</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=k>DESC</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>depart_rank</span><span class=p>,</span><span class=w> </span><span class=n>RANK</span><span class=p>()</span><span class=w> </span><span class=n>OVER</span><span class=p>(</span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=k>DESC</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>over_rank</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>employees</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>------------------+--------+-------------+-----------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>|</span><span class=w> </span><span class=n>department</span><span class=w>       </span><span class=o>|</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>depart_rank</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>over_rank</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>+</span><span class=c1>------------------+--------+-------------+-----------+
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>|</span><span class=w> </span><span class=n>sales</span><span class=w>            </span><span class=o>|</span><span class=w> </span><span class=mi>159000</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>1</span><span class=w> </span><span class=o>|</span><span class=w>         </span><span class=mi>1</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>engineering</span><span class=w>      </span><span class=o>|</span><span class=w> </span><span class=mi>103000</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>1</span><span class=w> </span><span class=o>|</span><span class=w>         </span><span class=mi>2</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>engineering</span><span class=w>      </span><span class=o>|</span><span class=w>  </span><span class=mi>91000</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>2</span><span class=w> </span><span class=o>|</span><span class=w>         </span><span class=mi>3</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>engineering</span><span class=w>      </span><span class=o>|</span><span class=w>  </span><span class=mi>89000</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>3</span><span class=w> </span><span class=o>|</span><span class=w>         </span><span class=mi>4</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>engineering</span><span class=w>      </span><span class=o>|</span><span class=w>  </span><span class=mi>80000</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>4</span><span class=w> </span><span class=o>|</span><span class=w>         </span><span class=mi>5</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>sales</span><span class=w>            </span><span class=o>|</span><span class=w>  </span><span class=mi>72000</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>2</span><span class=w> </span><span class=o>|</span><span class=w>         </span><span class=mi>6</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>engineering</span><span class=w>      </span><span class=o>|</span><span class=w>  </span><span class=mi>70000</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>5</span><span class=w> </span><span class=o>|</span><span class=w>         </span><span class=mi>7</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>sales</span><span class=w>            </span><span class=o>|</span><span class=w>  </span><span class=mi>70000</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>3</span><span class=w> </span><span class=o>|</span><span class=w>         </span><span class=mi>7</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>engineering</span><span class=w>      </span><span class=o>|</span><span class=w>  </span><span class=mi>69000</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>6</span><span class=w> </span><span class=o>|</span><span class=w>         </span><span class=mi>9</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>engineering</span><span class=w>      </span><span class=o>|</span><span class=w>  </span><span class=mi>67000</span><span class=w> </span><span class=o>|</span><span class=w>           </span><span class=mi>7</span><span class=w> </span><span class=o>|</span><span class=w>        </span><span class=mi>10</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span></code></pre></div><ul><li><p><code>NTLE</code></p></li><li><p><code>FIRST VALUE</code></p></li><li><p><code>LAG</code>: Shift down for 1 row</p></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/mysql/>MySQL</a></li><li><a href=http://localhost:1313/tags/reading/>Reading</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/sql-boy%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%9C%88/><span class=title>¬´ Prev</span><br><span>Daily | SQL BoyÁöÑÁ¨¨‰∏Ä‰∏™Êúà</span>
</a><a class=next href=http://localhost:1313/posts/common-terminologies-in-graph-thoery/><span class=title>Next ¬ª</span><br><span>Note | Common Terminologies in Graph Thoery</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Note | Quick Notes on SQL on x" href="https://x.com/intent/tweet/?text=Note%20%7c%20Quick%20Notes%20on%20SQL&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fsql-concept%2f&amp;hashtags=MySQL%2creading"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Note | Quick Notes on SQL on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fsql-concept%2f&amp;title=Note%20%7c%20Quick%20Notes%20on%20SQL&amp;summary=Note%20%7c%20Quick%20Notes%20on%20SQL&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fsql-concept%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Note | Quick Notes on SQL on reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fsql-concept%2f&title=Note%20%7c%20Quick%20Notes%20on%20SQL"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Note | Quick Notes on SQL on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fsql-concept%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Note | Quick Notes on SQL on whatsapp" href="https://api.whatsapp.com/send?text=Note%20%7c%20Quick%20Notes%20on%20SQL%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fsql-concept%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Note | Quick Notes on SQL on telegram" href="https://telegram.me/share/url?text=Note%20%7c%20Quick%20Notes%20on%20SQL&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fsql-concept%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Note | Quick Notes on SQL on ycombinator" href="https://news.ycombinator.com/submitlink?t=Note%20%7c%20Quick%20Notes%20on%20SQL&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fsql-concept%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>ü§ó Wenbo'Log</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>